"""
ADDIE 단계별 평가 기준 정의

이 모듈은 ADDIE 모델 기반 교수설계 평가를 위한 루브릭을 정의합니다.
- 33개 소단계별 상세 평가 기준 (DETAILED_RUBRIC_DEFINITIONS)
- 13개 통합 항목 정의 (ADDIE_RUBRIC_DEFINITIONS)
- 33개 → 13개 매핑 (ITEM_MAPPING)
"""

from isd_evaluator.models import ADDIEPhase


# 항목별 최대 점수
MAX_SCORE_PER_ITEM = 10.0


# 단계별 가중치 (기본값)
DEFAULT_PHASE_WEIGHTS = {
    ADDIEPhase.ANALYSIS: 0.25,       # 분석 25%
    ADDIEPhase.DESIGN: 0.25,         # 설계 25%
    ADDIEPhase.DEVELOPMENT: 0.20,    # 개발 20%
    ADDIEPhase.IMPLEMENTATION: 0.15, # 실행 15%
    ADDIEPhase.EVALUATION: 0.15,     # 평가 15%
}


# ============================================================================
# 33개 소단계별 상세 루브릭
# 각 소단계는 ADDIE 모델의 5개 대단계(분석/설계/개발/실행/평가)에 속하며,
# 13개 상위 항목(A1~A3, D1~D3, Dev1~Dev2, I1~I2, E1~E3)에 매핑됩니다.
# Context Matrix - 교수설계 분류.csv의 중단계 기준
# ============================================================================
DETAILED_RUBRIC_DEFINITIONS = {
    # ========== 분석(Analysis) 단계 ==========
    1: {
        "phase": "analysis",
        "category": "요구분석",
        "name": "문제 확인 및 정의",
        "parent_item": "A1",
        "criteria": {
            "excellent": "문제의 원인과 학습자 요구를 명확히 정의하고, 구체적이고 체계적인 데이터 수집 방법을 제시하며, 분석 결과를 논리적으로 보고함",
            "good": "문제의 원인과 요구를 대체로 잘 정의하고, 적절한 데이터 수집 방법을 제시하며, 분석 결과를 비교적 명확하게 보고함",
            "satisfactory": "문제의 원인과 요구를 일부 정의하고, 데이터 수집 방법이 다소 불충분하며, 분석 결과 보고가 다소 모호함",
            "poor": "문제의 원인과 요구 정의가 불명확하고, 데이터 수집 방법이 부적절하며, 분석 결과 보고가 명확하지 않음",
            "absent": "문제의 원인과 요구를 거의 정의하지 못하고, 적절한 데이터 수집 방법을 제시하지 않으며, 분석 결과 보고가 거의 이루어지지 않음",
        }
    },
    2: {
        "phase": "analysis",
        "category": "요구분석",
        "name": "차이분석",
        "parent_item": "A1",
        "criteria": {
            "excellent": "현재와 목표 성과 간의 차이를 명확히 식별하고, 차이의 원인을 체계적으로 분석하며, 실질적이고 구체적인 교육적 개입 방안을 제시",
            "good": "현재와 목표 성과 간의 차이를 식별하고, 차이의 원인을 분석하며, 교육적 개입 방안을 제시하지만 일부 구체성이 부족",
            "satisfactory": "현재와 목표 성과 간의 차이를 대략적으로 식별하고, 차이의 원인을 일부 분석하며, 일반적인 교육적 개입 방안을 제시",
            "poor": "현재와 목표 성과 간의 차이를 명확히 식별하지 못하고, 차이의 원인 분석이 부족하며, 교육적 개입 방안이 추상적",
            "absent": "현재와 목표 성과 간의 차이를 식별하지 못하고, 차이의 원인 분석이 거의 없으며, 교육적 개입 방안이 부적절",
        }
    },
    3: {
        "phase": "analysis",
        "category": "요구분석",
        "name": "수행분석",
        "parent_item": "A1",
        "criteria": {
            "excellent": "분석 과정과 결과물을 매우 구체적으로 설명하며, 수행 격차와 교육 필요성을 명확히 식별",
            "good": "분석 과정과 결과물을 설명하며, 수행 격차와 교육 필요성을 식별하지만 일부 세부사항이 부족",
            "satisfactory": "분석 과정과 결과물의 설명이 불완전하며, 수행 격차 식별에 어려움이 있음",
            "poor": "분석 과정과 결과물에 대한 이해가 부족하며, 수행 격차를 명확히 식별하지 못함",
            "absent": "분석 과정과 결과물에 대한 설명이 거의 없거나 전혀 이해하지 못함",
        }
    },
    4: {
        "phase": "analysis",
        "category": "요구분석",
        "name": "요구 우선순위 결정",
        "parent_item": "A1",
        "criteria": {
            "excellent": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성을 명확히 설명하고, 이를 바탕으로 체계적으로 우선순위를 결정하는 과정을 상세히 서술",
            "good": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성을 설명하였으나, 우선순위 결정 과정에서 일부 세부사항이 부족",
            "satisfactory": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성을 부분적으로 설명하였으며, 우선순위 결정 과정이 모호함",
            "poor": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성을 거의 설명하지 못하였고, 우선순위 결정 과정이 불명확함",
            "absent": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성을 전혀 설명하지 못하였으며, 우선순위 결정 과정이 없음",
        }
    },
    5: {
        "phase": "analysis",
        "category": "학습자 및 환경분석",
        "name": "학습자 분석",
        "parent_item": "A2",
        "criteria": {
            "excellent": "학습자의 학습 스타일과 동기 수준을 정확히 분석하고, 이에 적합한 교수 전략을 구체적으로 제안. 제안된 전략은 학습자의 특성을 반영하며 실행 가능성이 높음",
            "good": "학습자의 학습 스타일과 동기 수준을 대체로 잘 분석하였으며, 적절한 교수 전략을 제안. 다만 제안된 전략의 구체성이 다소 부족할 수 있음",
            "satisfactory": "학습자의 학습 스타일과 동기 수준을 부분적으로 분석하였으나, 제안된 교수 전략이 학습자 특성과 일치하지 않거나 구체성이 부족",
            "poor": "학습자의 학습 스타일과 동기 수준 분석이 부정확하며, 제안된 교수 전략이 비현실적이거나 학습자 특성을 반영하지 못함",
            "absent": "학습자의 학습 스타일과 동기 수준을 분석하지 못하였고, 교수 전략을 제안하지 않았거나 매우 부적절",
        }
    },
    6: {
        "phase": "analysis",
        "category": "학습자 및 환경분석",
        "name": "환경 분석(물리·조직·기술 환경)",
        "parent_item": "A2",
        "criteria": {
            "excellent": "분석이 매우 체계적이며, 모든 주요 요소(인터넷 속도, 플랫폼 안정성, UI, 서버 확장성 등)를 포괄하고 구체적인 개선 방안을 제시",
            "good": "분석이 전반적으로 잘 이루어졌으며, 대부분의 주요 요소를 다루고 적절한 개선 방안을 제시",
            "satisfactory": "분석이 다소 불완전하며, 일부 주요 요소가 누락되었으나 개선 방안은 제시됨",
            "poor": "분석이 미흡하며, 주요 요소의 식별이 부족하고 개선 방안도 불명확",
            "absent": "분석이 거의 이루어지지 않았으며, 주요 요소와 개선 방안이 거의 제시되지 않음",
        }
    },
    7: {
        "phase": "analysis",
        "category": "과제 및 목표분석",
        "name": "초기 학습목표 분석",
        "parent_item": "A3",
        "criteria": {
            "excellent": "학습 목표의 명확성과 측정 가능성을 모두 명확하게 개선하며, 구체적인 예시를 통해 설명",
            "good": "학습 목표의 명확성과 측정 가능성 중 하나를 효과적으로 개선하며, 일부 구체적인 예시를 제공",
            "satisfactory": "학습 목표의 개선 방향을 제시하나, 구체성이 부족하거나 부분적으로만 개선",
            "poor": "학습 목표의 개선 방향이 모호하며, 명확성이나 측정 가능성 중 하나만 부분적으로 다룸",
            "absent": "학습 목표의 개선 방향을 거의 제시하지 못하며, 명확성과 측정 가능성에 대한 이해가 부족",
        }
    },
    8: {
        "phase": "analysis",
        "category": "과제 및 목표분석",
        "name": "하위 기능 분석",
        "parent_item": "A3",
        "criteria": {
            "excellent": "하위 기능을 명확하고 구체적으로 도출하고, 학습 목표와의 연관성을 명확히 설명함. 모든 주요 하위 기능을 포괄",
            "good": "대부분의 하위 기능을 정확하게 도출하고, 학습 목표와의 연관성을 어느 정도 설명함. 일부 세부사항이 부족할 수 있음",
            "satisfactory": "하위 기능을 일부 도출하였으나, 학습 목표와의 연관성이 불명확하거나 주요 기능이 누락",
            "poor": "하위 기능 도출이 부정확하거나 거의 이루어지지 않았으며, 학습 목표와의 연관성이 거의 없음",
            "absent": "하위 기능 도출이 전혀 이루어지지 않았거나, 학습 목표와의 연관성이 전혀 없음",
        }
    },
    9: {
        "phase": "analysis",
        "category": "과제 및 목표분석",
        "name": "출발점 행동 분석",
        "parent_item": "A3",
        "criteria": {
            "excellent": "학습자의 현재 지식 수준과 학습 목표를 명확히 분석하고, 구체적이고 실현 가능한 학습 활동을 제안함. 제안된 활동은 목표 달성에 직접적으로 기여",
            "good": "학습자의 지식 수준과 목표를 분석하였으나 일부 설명이 부족하거나 제안된 학습 활동이 다소 일반적",
            "satisfactory": "분석이 불충분하거나 학습 목표와의 연관성이 낮은 학습 활동을 제안",
            "poor": "학습자의 현재 지식 수준과 목표 분석이 부정확하며, 제안된 학습 활동이 목표 달성에 기여하지 못함",
            "absent": "학습자의 출발점 행동 분석이 거의 이루어지지 않았고, 학습 활동 제안이 부적절",
        }
    },
    10: {
        "phase": "analysis",
        "category": "과제 및 목표분석",
        "name": "과제분석 결과 검토·정리",
        "parent_item": "A3",
        "criteria": {
            "excellent": "과제 분석 결과를 명확히 이해하고, 교육 목표와의 일관성을 철저히 검토하며, 수정 제안이 구체적이고 실현 가능",
            "good": "과제 분석 결과를 이해하고, 교육 목표와의 일관성을 대체로 검토하며, 수정 제안이 적절",
            "satisfactory": "과제 분석 결과를 부분적으로 이해하고, 교육 목표와의 일관성 검토가 미흡하며, 수정 제안이 일반적",
            "poor": "과제 분석 결과에 대한 이해가 부족하고, 교육 목표와의 일관성 검토가 거의 없으며, 수정 제안이 부적절",
            "absent": "과제 분석 결과를 이해하지 못하고, 교육 목표와의 일관성 검토 및 수정 제안이 전혀 없음",
        }
    },

    # ========== 설계(Design) 단계 ==========
    11: {
        "phase": "design",
        "category": "평가 및 목표 정렬 설계",
        "name": "학습목표 정교화",
        "parent_item": "D1",
        "criteria": {
            "excellent": "학습목표가 교육 목표와 완벽하게 일치하며, 구체적이고 측정 가능하며 명확함. 학습자의 수준과 요구를 충분히 반영",
            "good": "학습목표가 교육 목표와 대체로 일치하며, 대부분 구체적이고 측정 가능함. 학습자의 요구를 어느 정도 반영",
            "satisfactory": "학습목표가 교육 목표와 일부 일치하지만, 구체성이나 측정 가능성이 부족. 학습자의 요구 반영이 미흡",
            "poor": "학습목표가 교육 목표와 거의 일치하지 않으며, 구체성이나 측정 가능성이 매우 부족. 학습자의 요구를 거의 반영하지 않음",
            "absent": "학습목표가 교육 목표와 전혀 일치하지 않으며, 구체성이나 측정 가능성이 전혀 없음. 학습자의 요구를 전혀 반영하지 않음",
        }
    },
    12: {
        "phase": "design",
        "category": "평가 및 목표 정렬 설계",
        "name": "평가 계획 수립",
        "parent_item": "D1",
        "criteria": {
            "excellent": "학습 목표와 평가 방법이 완벽하게 정렬되어 있으며, 평가 계획이 명확하고 구체적. 다양한 평가 방법이 적절히 사용됨",
            "good": "학습 목표와 평가 방법이 대체로 정렬되어 있으며, 평가 계획이 명확함. 몇 가지 평가 방법이 적절히 사용됨",
            "satisfactory": "학습 목표와 평가 방법이 부분적으로 정렬되어 있으며, 평가 계획이 다소 모호함. 평가 방법이 제한적",
            "poor": "학습 목표와 평가 방법이 제대로 정렬되지 않았으며, 평가 계획이 불명확함. 평가 방법이 부적절",
            "absent": "학습 목표와 평가 방법이 전혀 정렬되지 않았으며, 평가 계획이 전무함. 평가 방법이 전혀 사용되지 않음",
        }
    },
    13: {
        "phase": "design",
        "category": "교수전략 및 학습경험 설계",
        "name": "교수 내용 선정",
        "parent_item": "D2",
        "criteria": {
            "excellent": "학습 목표와 학습자 특성을 정확히 반영하여 교수 내용을 선정하였으며, 교육 내용의 적절성과 일관성이 뛰어남",
            "good": "학습 목표와 학습자 특성을 대체로 반영하였으며, 교육 내용의 적절성이 양호",
            "satisfactory": "학습 목표와 학습자 특성을 부분적으로 반영하였으나, 교육 내용의 적절성에 일부 부족함이 있음",
            "poor": "학습 목표와 학습자 특성을 충분히 반영하지 못하였으며, 교육 내용의 적절성이 낮음",
            "absent": "학습 목표와 학습자 특성을 거의 반영하지 못하였고, 교육 내용의 적절성이 매우 낮음",
        }
    },
    14: {
        "phase": "design",
        "category": "교수전략 및 학습경험 설계",
        "name": "교수적 전략 수립",
        "parent_item": "D2",
        "criteria": {
            "excellent": "학습 목표와 학습자 특성을 명확히 이해하고, 다양한 교수 전략과 학습 경험을 제안하여 목표 달성 가능성을 높임. 제안된 전략은 구체적이며 실행 가능",
            "good": "학습 목표와 학습자 특성을 고려하여 적절한 교수 전략을 제안하나, 일부 구체성이 부족할 수 있음. 전략의 실행 가능성은 높음",
            "satisfactory": "학습 목표에 맞는 교수 전략을 제안하나, 학습자 특성을 충분히 반영하지 못하거나 구체성이 부족",
            "poor": "학습 목표와 학습자 특성을 충분히 고려하지 않은 전략을 제안하며, 구체성이 부족하고 실행 가능성이 낮음",
            "absent": "학습 목표와 학습자 특성을 고려하지 않고 일반적이며 비효율적인 전략을 제안",
        }
    },
    15: {
        "phase": "design",
        "category": "교수전략 및 학습경험 설계",
        "name": "비교수적 전략 수립",
        "parent_item": "D2",
        "criteria": {
            "excellent": "학습 목표와 학습자 특성을 깊이 있게 분석하여, 명확하고 창의적인 비교수적 전략을 제안. 제안된 전략은 학습자의 동기 부여와 자기 주도 학습을 효과적으로 촉진",
            "good": "학습 목표와 학습자 특성을 고려하여 적절한 비교수적 전략을 제안. 제안된 전략은 학습자의 동기 부여와 자기 주도 학습에 긍정적인 영향을 미침",
            "satisfactory": "학습 목표와 학습자 특성을 부분적으로 고려하여 비교수적 전략을 제안하지만, 전략의 효과가 제한적일 수 있음",
            "poor": "학습 목표와 학습자 특성을 충분히 고려하지 않고 비교수적 전략을 제안하며, 전략의 효과가 미미함",
            "absent": "학습 목표와 학습자 특성을 거의 고려하지 않고 비교수적 전략을 제안하며, 전략의 효과가 거의 없음",
        }
    },
    16: {
        "phase": "design",
        "category": "교수전략 및 학습경험 설계",
        "name": "전략 실행을 위한 매체 선정과 활용 계획",
        "parent_item": "D2",
        "criteria": {
            "excellent": "학습 목표와 학습자 특성을 정확히 반영하여, 창의적이고 실용적인 교수전략과 학습경험을 제안하며, 매체 선정과 활용 계획이 구체적이고 실행 가능",
            "good": "학습 목표와 학습자 특성을 대체로 반영하며, 적절한 교수전략과 학습경험을 제안하고, 매체 선정과 활용 계획이 실현 가능",
            "satisfactory": "학습 목표와 학습자 특성을 부분적으로 반영하며, 교수전략과 학습경험이 다소 일반적이고, 매체 선정과 활용 계획이 모호",
            "poor": "학습 목표와 학습자 특성을 충분히 반영하지 못하며, 교수전략과 학습경험이 비현실적이고, 매체 선정과 활용 계획이 부적절",
            "absent": "학습 목표와 학습자 특성을 거의 반영하지 못하며, 교수전략과 학습경험이 부재하거나 매체 선정과 활용 계획이 전혀 이루어지지 않음",
        }
    },
    17: {
        "phase": "design",
        "category": "교수전략 및 학습경험 설계",
        "name": "학습활동 및 시간 구조화",
        "parent_item": "D2",
        "criteria": {
            "excellent": "학습 목표와 학습자 특성에 완벽히 부합하는 학습활동을 제안하고, 시간 구조를 효율적으로 배치하여 학습의 흐름이 자연스러움",
            "good": "학습 목표와 대체로 부합하는 학습활동을 제안하고, 시간 구조가 적절하나 일부 개선이 필요",
            "satisfactory": "학습 목표와 부분적으로 부합하는 학습활동을 제안하며, 시간 구조가 비효율적이거나 흐름이 부자연스러움",
            "poor": "학습 목표와 부합하지 않는 학습활동을 제안하거나, 시간 구조가 전혀 고려되지 않음",
            "absent": "학습 목표와 학습자 특성을 전혀 고려하지 않은 학습활동을 제안하며, 시간 구조가 전혀 없음",
        }
    },
    18: {
        "phase": "design",
        "category": "프로토타입 구조 설계",
        "name": "스토리보드/화면 흐름 설계",
        "parent_item": "D3",
        "criteria": {
            "excellent": "교육 목표와 학습자 분석 정보를 정확히 반영하여, 창의적이고 논리적인 스토리보드 및 화면 흐름을 설계함. 학습 활동과 화면 전환이 명확하고 일관성 있음",
            "good": "교육 목표와 학습자 분석 정보를 대체로 반영하여, 논리적인 스토리보드 및 화면 흐름을 설계함. 일부 학습 활동이나 화면 전환이 모호할 수 있음",
            "satisfactory": "교육 목표와 학습자 분석 정보를 부분적으로 반영하여, 기본적인 스토리보드 및 화면 흐름을 설계함. 여러 학습 활동이나 화면 전환이 불명확",
            "poor": "교육 목표와 학습자 분석 정보를 거의 반영하지 못하고, 비논리적이거나 불완전한 스토리보드 및 화면 흐름을 설계함",
            "absent": "교육 목표와 학습자 분석 정보를 전혀 반영하지 못하고, 스토리보드 및 화면 흐름이 거의 없음",
        }
    },

    # ========== 개발(Development) 단계 ==========
    19: {
        "phase": "development",
        "category": "프로토타입 개발",
        "name": "학습자용 자료 개발",
        "parent_item": "Dev1",
        "criteria": {
            "excellent": "학습 목표와 학습자 프로필을 정확히 반영하여 자료의 형태와 내용을 제안하며, 제안된 자료가 학습자의 수준에 적합하고 학습 목표 달성에 효과적임을 명확히 설명",
            "good": "학습 목표와 학습자 프로필을 대체로 반영하였으며, 자료의 형태와 내용이 적절하나 일부 세부 사항이 부족할 수 있음",
            "satisfactory": "학습 목표와 학습자 프로필을 부분적으로 반영하였으며, 제안된 자료의 형태와 내용이 다소 일반적이거나 부적절할 수 있음",
            "poor": "학습 목표와 학습자 프로필을 제대로 반영하지 못하였으며, 자료의 형태와 내용이 비효율적이거나 부적절",
            "absent": "학습 목표와 학습자 프로필을 전혀 반영하지 못하였으며, 자료의 형태와 내용이 학습 목표 달성에 전혀 기여하지 않음",
        }
    },
    20: {
        "phase": "development",
        "category": "프로토타입 개발",
        "name": "교수자용 매뉴얼 개발",
        "parent_item": "Dev1",
        "criteria": {
            "excellent": "매뉴얼의 목차와 각 장의 내용이 교육 목표와 완벽하게 일치하며, 교수 전략과 평가 방법이 구체적이고 명확하게 제시",
            "good": "매뉴얼의 목차와 내용이 교육 목표에 대체로 부합하며, 교수 전략과 평가 방법이 적절하게 제시",
            "satisfactory": "매뉴얼의 목차와 내용이 교육 목표와 일부 일치하지만, 교수 전략과 평가 방법이 불명확하거나 부족",
            "poor": "매뉴얼의 목차와 내용이 교육 목표와 거의 일치하지 않으며, 교수 전략과 평가 방법이 거의 제시되지 않음",
            "absent": "매뉴얼의 목차와 내용이 교육 목표와 전혀 일치하지 않으며, 교수 전략과 평가 방법이 전혀 제시되지 않음",
        }
    },
    21: {
        "phase": "development",
        "category": "프로토타입 개발",
        "name": "운영자용 매뉴얼 개발",
        "parent_item": "Dev1",
        "criteria": {
            "excellent": "매뉴얼의 일관성을 정확히 평가하고, 구체적이고 실행 가능한 수정 제안을 포함하여 운영자가 쉽게 이해할 수 있도록 설명",
            "good": "매뉴얼의 일관성을 평가하고, 수정 제안을 제시하지만 일부 제안이 모호하거나 실행 가능성이 떨어짐",
            "satisfactory": "매뉴얼의 일관성 평가가 부정확하거나 수정 제안이 부족하여 운영자가 이해하기 어려움",
            "poor": "매뉴얼의 일관성 평가가 거의 없거나 수정 제안이 전혀 포함되어 있지 않음",
            "absent": "매뉴얼의 분석이 전혀 이루어지지 않았거나, 제안이 무관하거나 부적절",
        }
    },
    22: {
        "phase": "development",
        "category": "프로토타입 개발",
        "name": "평가 도구·문항 개발",
        "parent_item": "Dev1",
        "criteria": {
            "excellent": "평가 문항이 교육 목표와 완벽히 일치하며, 학습자 수준에 적합하고 명확한 평가 기준을 포함",
            "good": "평가 문항이 교육 목표와 대체로 일치하며, 학습자 수준에 적합하나 평가 기준이 다소 모호",
            "satisfactory": "평가 문항이 교육 목표와 일부 일치하나, 학습자 수준에 부적합하거나 평가 기준이 불명확",
            "poor": "평가 문항이 교육 목표와 거의 일치하지 않으며, 학습자 수준과 맞지 않고 평가 기준이 없음",
            "absent": "평가 문항이 교육 목표와 전혀 일치하지 않으며, 학습자 수준과 맞지 않고 평가 기준이 전혀 없음",
        }
    },
    23: {
        "phase": "development",
        "category": "개발 결과 검토 및 수정",
        "name": "전문가 검토",
        "parent_item": "Dev2",
        "criteria": {
            "excellent": "개선이 필요한 요소를 명확히 식별하고, 각 요소에 대한 구체적이고 실행 가능한 개선 방안을 제시. 피드백은 교육 목표와 학습자 요구에 부합",
            "good": "개선이 필요한 요소를 식별하고, 대부분의 요소에 대해 실행 가능한 개선 방안을 제시. 피드백은 대체로 교육 목표와 학습자 요구에 부합",
            "satisfactory": "일부 개선이 필요한 요소를 식별하였으나, 개선 방안이 모호하거나 실행 가능성이 낮음. 피드백이 교육 목표와 학습자 요구에 부분적으로만 부합",
            "poor": "개선이 필요한 요소의 식별이 불충분하고, 개선 방안이 구체적이지 않음. 피드백이 교육 목표와 학습자 요구에 거의 부합하지 않음",
            "absent": "개선이 필요한 요소를 거의 식별하지 못하였고, 개선 방안이 전혀 제시되지 않음. 피드백이 교육 목표와 학습자 요구에 전혀 부합하지 않음",
        }
    },

    # ========== 실행(Implementation) 단계 ==========
    24: {
        "phase": "implementation",
        "category": "프로그램 실행 준비",
        "name": "교수자·운영자 오리엔테이션",
        "parent_item": "I1",
        "criteria": {
            "excellent": "오리엔테이션의 목표와 대상자의 요구를 명확히 이해하고, 프로그램 운영 절차와 필요한 리소스를 구체적으로 설명하며, 모든 요소를 체계적으로 통합하여 제시",
            "good": "오리엔테이션의 목표와 대상자의 요구를 이해하고, 프로그램 운영 절차와 필요한 리소스를 설명하지만, 일부 요소가 구체적이지 않거나 통합이 부족",
            "satisfactory": "오리엔테이션의 목표나 대상자의 요구 중 일부만 언급하고, 프로그램 운영 절차와 필요한 리소스를 부분적으로 설명",
            "poor": "오리엔테이션의 목표나 대상자의 요구를 거의 언급하지 않으며, 프로그램 운영 절차와 필요한 리소스를 제대로 설명하지 못함",
            "absent": "오리엔테이션의 목표, 대상자의 요구, 프로그램 운영 절차, 필요한 리소스를 전혀 설명하지 못함",
        }
    },
    25: {
        "phase": "implementation",
        "category": "프로그램 실행 준비",
        "name": "시스템/환경 점검",
        "parent_item": "I1",
        "criteria": {
            "excellent": "시스템과 환경 점검의 모든 주요 요소(호환성, 네트워크, 소프트웨어 등)를 포괄하며, 잠재적인 문제를 정확히 식별하고 구체적인 해결 방안을 제시",
            "good": "대부분의 시스템 및 환경 요소를 점검하고, 주요 문제를 식별하며 일반적인 해결 방안을 제시",
            "satisfactory": "일부 시스템 및 환경 요소를 점검하나, 문제 식별이 불완전하거나 해결 방안이 모호",
            "poor": "시스템 및 환경 점검이 제한적이며, 문제 식별이나 해결 방안 제시가 거의 없음",
            "absent": "시스템 및 환경 점검이 거의 이루어지지 않았고, 문제 식별 및 해결 방안 제시가 전혀 없음",
        }
    },
    26: {
        "phase": "implementation",
        "category": "프로그램 실행",
        "name": "프로토타입 실행",
        "parent_item": "I2",
        "criteria": {
            "excellent": "피드백 수집 및 분석 방법이 매우 구체적이고 체계적이며, 개선점 제안이 명확하고 실질적",
            "good": "피드백 수집 및 분석 방법이 구체적이며, 개선점 제안이 실질적",
            "satisfactory": "피드백 수집 및 분석 방법이 다소 일반적이며, 개선점 제안이 일부 실질적",
            "poor": "피드백 수집 및 분석 방법이 모호하며, 개선점 제안이 구체적이지 않음",
            "absent": "피드백 수집 및 분석 방법이 거의 없거나 매우 부실하며, 개선점 제안이 전혀 실질적이지 않음",
        }
    },
    27: {
        "phase": "implementation",
        "category": "프로그램 실행",
        "name": "운영 모니터링 및 지원",
        "parent_item": "I2",
        "criteria": {
            "excellent": "오류의 원인을 명확히 분석하고, 구체적이며 실행 가능한 해결 방안을 제시. 해결 방안이 학습 프로그램의 목표와 일치하며, 운영의 지속성을 보장",
            "good": "오류의 원인을 분석하고, 일반적인 해결 방안을 제시. 해결 방안이 다소 구체성이 부족하지만, 문제 해결에 기여할 수 있음",
            "satisfactory": "오류 원인 분석이 불완전하며, 해결 방안이 모호함. 제시된 방안이 문제 해결에 직접적인 기여를 하지 못할 수 있음",
            "poor": "오류 원인 분석이 부정확하거나 결여되어 있으며, 해결 방안이 비현실적. 문제 해결에 거의 기여하지 못함",
            "absent": "오류 원인 분석과 해결 방안 제시가 전혀 이루어지지 않음",
        }
    },

    # ========== 평가(Evaluation) 단계 ==========
    28: {
        "phase": "evaluation",
        "category": "형성평가",
        "name": "파일럿/초기 실행 중 자료 수집",
        "parent_item": "E1",
        "criteria": {
            "excellent": "학습자가 어려움을 겪은 구체적인 모듈과 그 이유를 명확히 식별하고, 이를 개선하기 위한 창의적이고 실현 가능한 제안을 포함",
            "good": "학습자가 어려움을 겪은 모듈과 그 이유를 식별하고, 이를 개선하기 위한 실현 가능한 제안을 포함",
            "satisfactory": "학습자가 어려움을 겪은 모듈을 식별하였으나, 그 이유나 개선 제안이 불명확하거나 부분적으로만 제시",
            "poor": "학습자가 어려움을 겪은 모듈이나 이유를 명확히 식별하지 못하고, 개선 제안이 부족",
            "absent": "학습자 피드백 분석이 부정확하거나, 개선 제안이 전혀 제시되지 않음",
        }
    },
    29: {
        "phase": "evaluation",
        "category": "형성평가",
        "name": "형성평가 결과 기반 1차 프로그램 개선",
        "parent_item": "E1",
        "criteria": {
            "excellent": "문제 영역을 명확히 식별하고, 구체적이며 실행 가능한 개선 방안을 제시. 개선 방안은 학습 목표와 일치하며, 학습자의 이해도를 높일 수 있는 전략을 포함",
            "good": "문제 영역을 식별하고, 개선 방안을 제시하나 구체성이 부족하거나 일부 실행 가능성이 낮음. 개선 방안이 학습 목표와 대체로 일치",
            "satisfactory": "문제 영역 식별이 불완전하거나, 개선 방안이 일반적이고 구체성이 부족. 학습 목표와의 연결이 약함",
            "poor": "문제 영역 식별이 부정확하며, 개선 방안이 비현실적이거나 학습 목표와 관련이 없음",
            "absent": "문제 영역을 식별하지 못하고, 개선 방안이 없거나 전혀 관련이 없음",
        }
    },
    30: {
        "phase": "evaluation",
        "category": "총괄평가 및 채택 결정",
        "name": "총괄 평가 문항 개발(검사도구 완성)",
        "parent_item": "E2",
        "criteria": {
            "excellent": "총괄평가 도구가 학습목표와 완벽히 정렬되어 타당도(Validity)를 확보하고, 문항 간 일관성으로 신뢰도가 높으며, 성취기준에 따른 명확한 채점 기준을 포함",
            "good": "총괄평가 도구가 학습목표와 대체로 정렬되어 있고, 문항 간 일관성이 있으나 일부 채점 기준이 모호함",
            "satisfactory": "총괄평가 도구가 학습목표와 부분적으로 정렬되어 있고, 신뢰도 확보가 불충분하거나 채점 기준이 불명확",
            "poor": "총괄평가 도구가 학습목표와 거의 정렬되지 않고, 문항 일관성이 부족하며 채점 기준이 없음",
            "absent": "총괄평가 도구가 학습목표와 전혀 정렬되지 않고, 타당도와 신뢰도를 전혀 갖추지 못함",
        }
    },
    31: {
        "phase": "evaluation",
        "category": "총괄평가 및 채택 결정",
        "name": "총괄평가 시행 및 프로그램 효과 분석",
        "parent_item": "E2",
        "criteria": {
            "excellent": "보고서는 명확하고 체계적으로 작성되었으며, 프로그램의 목표 달성 여부와 학습자 성취도에 대한 깊이 있는 분석이 포함. 교육 방법의 효과성과 개선 사항에 대한 구체적인 제안이 제시",
            "good": "보고서는 전반적으로 잘 작성되었으며, 프로그램의 효과성에 대한 분석이 포함. 그러나 일부 분석이 다소 피상적이거나 개선 사항이 구체적이지 않음",
            "satisfactory": "보고서는 기본적인 분석을 포함하고 있으나, 프로그램의 목표 달성 여부나 학습자 성취도에 대한 구체적인 정보가 부족. 개선 사항에 대한 제안이 미흡",
            "poor": "보고서는 분석이 부족하고, 프로그램의 효과성에 대한 평가가 불충분. 개선 사항에 대한 제안이 거의 없음",
            "absent": "보고서는 체계적이지 않으며, 프로그램의 효과성에 대한 분석이 거의 없음. 개선 사항에 대한 제안이 전혀 없음",
        }
    },
    32: {
        "phase": "evaluation",
        "category": "총괄평가 및 채택 결정",
        "name": "프로그램 채택 여부 결정",
        "parent_item": "E2",
        "criteria": {
            "excellent": "프로그램의 목표 달성도, 학습자 만족도, 비용 효율성에 대한 철저한 분석과 논리적인 채택 여부 결정이 포함되어 있으며, 모든 요소가 명확하게 설명",
            "good": "프로그램의 목표 달성도, 학습자 만족도, 비용 효율성에 대한 분석이 이루어졌으며, 채택 여부 결정이 타당하지만 일부 요소의 설명이 부족",
            "satisfactory": "프로그램의 목표 달성도, 학습자 만족도, 비용 효율성 중 일부 요소에 대한 분석이 부족하거나, 채택 여부 결정이 불명확",
            "poor": "프로그램의 목표 달성도, 학습자 만족도, 비용 효율성에 대한 분석이 거의 없거나, 채택 여부 결정이 논리적이지 않음",
            "absent": "프로그램의 목표 달성도, 학습자 만족도, 비용 효율성에 대한 분석이 전혀 이루어지지 않았으며, 채택 여부 결정이 근거 없이 이루어짐",
        }
    },
    33: {
        "phase": "evaluation",
        "category": "프로그램 개선 및 환류",
        "name": "프로그램 개선",
        "parent_item": "E3",
        "criteria": {
            "excellent": "학습자 피드백과 성과 데이터를 종합적으로 분석하여 명확한 개선점을 도출하고, 구체적이며 실행 가능한 개선 방안을 제시",
            "good": "학습자 피드백과 성과 데이터를 분석하여 개선점을 도출하였으나, 개선 방안이 다소 일반적이거나 구체성이 부족",
            "satisfactory": "학습자 피드백 또는 성과 데이터 중 하나만 분석하여 부분적인 개선점을 도출하거나, 개선 방안이 모호",
            "poor": "피드백과 데이터 분석이 부실하여 명확한 개선점을 도출하지 못하고, 개선 방안이 전혀 구체적이지 않음",
            "absent": "피드백과 데이터 분석 없이 임의의 개선 방안을 제시하거나, 개선 방안이 부적절",
        }
    },
}


# ============================================================================
# 33개 → 13개 매핑 정의
# Context Matrix - 교수설계 분류.csv의 중단계 기준으로 그룹화
# ============================================================================
ITEM_MAPPING = {
    # Analysis (A1, A2, A3) - 분석 단계 (3개 중단계)
    "A1": [1, 2, 3, 4],         # 요구분석
    "A2": [5, 6],               # 학습자 및 환경분석
    "A3": [7, 8, 9, 10],        # 과제 및 목표분석

    # Design (D1, D2, D3) - 설계 단계 (3개 중단계)
    "D1": [11, 12],             # 평가 및 목표 정렬 설계
    "D2": [13, 14, 15, 16, 17], # 교수전략 및 학습경험 설계
    "D3": [18],                 # 프로토타입 구조 설계

    # Development (Dev1, Dev2) - 개발 단계 (2개 중단계)
    "Dev1": [19, 20, 21, 22],   # 프로토타입 개발
    "Dev2": [23],               # 개발 결과 검토 및 수정

    # Implementation (I1, I2) - 실행 단계 (2개 중단계)
    "I1": [24, 25],             # 프로그램 실행 준비
    "I2": [26, 27],             # 프로그램 실행

    # Evaluation (E1, E2, E3) - 평가 단계 (3개 중단계)
    "E1": [28, 29],             # 형성평가
    "E2": [30, 31, 32],         # 총괄평가 및 채택 결정
    "E3": [33],                 # 프로그램 개선 및 환류
}


# ============================================================================
# 13개 통합 항목 정의 (상위 레벨)
# Context Matrix - 교수설계 분류.csv의 중단계 기준
# ============================================================================
ADDIE_RUBRIC_DEFINITIONS = {
    "analysis": {
        "A1": {
            "name": "요구분석",
            "description": "문제 확인·정의, 차이분석, 수행분석을 통해 현재-목표 상태 간 수행 격차(Performance Gap)를 분석하고, 요구 우선순위를 결정하여 교육적 개입의 필요성과 방향을 규명했는지 평가",
            "sub_items": [1, 2, 3, 4],
        },
        "A2": {
            "name": "학습자 및 환경분석",
            "description": "학습자의 수준, 선지식, 특성, 동기, 요구를 분석하고, 수업에 영향을 미치는 물리적·조직적·기술적 환경을 분석하여 교육 설계의 출발점을 설정했는지 평가",
            "sub_items": [5, 6],
        },
        "A3": {
            "name": "과제 및 목표분석",
            "description": "초기 학습목표 분석, 하위 기능 분석, 출발점 행동 분석, 과제분석 결과 검토·정리를 수행하여 학습 과제를 체계적으로 분석했는지 평가",
            "sub_items": [7, 8, 9, 10],
        },
    },
    "design": {
        "D1": {
            "name": "평가 및 목표 정렬 설계",
            "description": "분석 결과를 바탕으로 ABCD 모델에 따라 학습목표를 정교화하고, 학습 목표 달성 여부를 판단하기 위한 평가 계획을 수립했는지 평가",
            "sub_items": [11, 12],
        },
        "D2": {
            "name": "교수전략 및 학습경험 설계",
            "description": "교수 내용 선정, 교수적/비교수적 전략 수립, 매체 선정, 학습활동 및 시간 구조화를 포함하여 학습 목표 달성을 위한 체계적인 학습경험을 설계했는지 평가",
            "sub_items": [13, 14, 15, 16, 17],
        },
        "D3": {
            "name": "프로토타입 구조 설계",
            "description": "스토리보드 및 화면 흐름을 설계하여 학습 콘텐츠의 구조와 네비게이션을 구체화했는지 평가",
            "sub_items": [18],
        },
    },
    "development": {
        "Dev1": {
            "name": "프로토타입 개발",
            "description": "학습자용 자료, 교수자용 매뉴얼, 운영자용 매뉴얼, 평가 도구·문항을 개발하여 설계를 구현했는지 평가",
            "sub_items": [19, 20, 21, 22],
        },
        "Dev2": {
            "name": "개발 결과 검토 및 수정",
            "description": "전문가 검토를 통해 개발된 자료의 품질을 검증하고 필요한 수정을 수행했는지 평가",
            "sub_items": [23],
        },
    },
    "implementation": {
        "I1": {
            "name": "프로그램 실행 준비",
            "description": "교수자·운영자 오리엔테이션과 시스템/환경 점검을 수행하여 프로그램 실행을 준비했는지 평가",
            "sub_items": [24, 25],
        },
        "I2": {
            "name": "프로그램 실행",
            "description": "프로토타입 실행 및 운영 모니터링·지원을 통해 프로그램을 효과적으로 운영했는지 평가",
            "sub_items": [26, 27],
        },
    },
    "evaluation": {
        "E1": {
            "name": "형성평가",
            "description": "파일럿/초기 실행 중 자료 수집과 형성평가 결과 기반 1차 프로그램 개선을 수행했는지 평가",
            "sub_items": [28, 29],
        },
        "E2": {
            "name": "총괄평가 및 채택 결정",
            "description": "총괄 평가 문항 개발, 총괄평가 시행 및 프로그램 효과 분석, 프로그램 채택 여부 결정을 체계적으로 수행했는지 평가",
            "sub_items": [30, 31, 32],
        },
        "E3": {
            "name": "프로그램 개선 및 환류",
            "description": "평가 결과를 바탕으로 프로그램을 개선하고 환류 체계를 구축했는지 평가",
            "sub_items": [33],
        },
    },
}


# ============================================================================
# 33개 소단계별 Benchmark Examples (Few-shot 프롬프트용)
# ============================================================================
BENCHMARK_EXAMPLES = {
    1: {
        "question": "주어진 교육 프로그램에서 학습자들의 성취도가 낮은 문제가 발생했습니다. LLM 기반 교수설계 지원 Agent는 이 문제를 확인하고 정의하기 위해 어떤 정보를 수집해야 하며, 그 결과를 어떻게 보고해야 하는지 서술하시오.",
        "answer": "요구분석을 위한 초기 데이터 수집 항목(예: 학습자의 배경, 현재 성취도, 학습 목표)과 문제 정의를 위한 분석 결과의 핵심 요소(예: 문제의 원인, 학습자 요구의 우선순위)를 포함한 서술형 답안",
    },
    2: {
        "question": "조직의 현재 성과가 목표 성과에 미치지 못하는 이유를 분석하고, 이를 해결하기 위한 교육적 개입 방안을 제안하시오.",
        "answer": "현재 성과와 목표 성과 간의 구체적인 차이점, 차이를 유발하는 원인, 제안하는 교육적 개입의 구체적인 내용.",
    },
    3: {
        "question": "새로운 직무 교육 프로그램을 설계하기 위해, 현재 직원들의 직무 수행 능력을 분석해야 합니다. LLM 기반 Agent가 수행해야 할 분석 과정과 결과물을 서술하시오.",
        "answer": "분석 과정에는 현재 직무 수행 수준의 데이터 수집, 주요 수행 요소 식별, 수행 격차 분석이 포함된다. 결과물로는 수행 격차를 명확히 보여주는 보고서와 교육 필요성에 대한 우선순위 목록이 포함된다.",
    },
    4: {
        "question": "교육 프로그램에서 발견된 여러 요구사항 중 가장 시급한 요구를 결정해야 합니다. LLM 기반 교수설계 지원 Agent가 이 작업을 수행하기 위해 어떤 정보를 수집하고, 어떻게 분석하여 우선순위를 결정할 수 있는지 설명하시오.",
        "answer": "요구사항의 중요성과 긴급성, 자원 가용성, 교육 목표와의 연관성 등을 고려하여 분석하고, 이를 바탕으로 우선순위를 결정하는 과정 서술.",
    },
    5: {
        "question": "주어진 학습자 프로필을 바탕으로 학습자의 학습 스타일과 동기 수준을 분석하고, 이에 적합한 교수 전략을 제안하시오.",
        "answer": "학습 스타일은 시각적, 청각적, 운동감각적 중 하나로, 동기 수준은 높음, 중간, 낮음 중 하나로 분석하고, 이에 따른 교수 전략을 서술형으로 제시한다.",
    },
    6: {
        "question": "특정 교육 기관에서 제공하는 온라인 강좌의 기술적 환경을 분석하라. 이 과정에서 고려해야 할 주요 요소와 그에 대한 개선 방안을 제시하라.",
        "answer": "주요 요소로는 인터넷 속도, 플랫폼 안정성, 사용자 인터페이스 등이 포함되며, 개선 방안으로는 서버 확장, UI 개선 등이 있다.",
    },
    7: {
        "question": "다음 학습 목표 초안을 분석하고, 명확성과 측정 가능성 측면에서 개선 방안을 제안하시오. 학습 목표: '학생들은 환경 보호의 중요성을 이해한다.'",
        "answer": "명확성 개선: '학생들은 환경 보호의 중요성을 설명할 수 있다.' 측정 가능성 개선: '학생들은 환경 보호의 중요성을 설명하는 에세이를 작성할 수 있다.'",
    },
    8: {
        "question": "주어진 학습 목표 '학생이 기본적인 프로그래밍 개념을 이해한다'에 대해 필요한 하위 기능을 분석하라.",
        "answer": "하위 기능으로는 변수 선언, 조건문 사용, 반복문 이해, 간단한 함수 작성 등이 포함될 수 있다.",
    },
    9: {
        "question": "학습자 그룹의 출발점 행동을 분석하여 학습 목표에 맞는 교육 전략을 제안하라. LLM은 학습자의 현재 지식 수준과 학습 목표 간의 차이를 분석하고, 필요한 학습 활동을 제안해야 한다.",
        "answer": "서술형 답안에는 학습자의 현재 지식 수준, 학습 목표, 그리고 제안된 학습 활동의 구체적인 설명이 포함되어야 한다.",
    },
    10: {
        "question": "주어진 교육 목표에 따라 과제 분석 결과를 검토하고, 필요한 수정 사항을 제안하시오.",
        "answer": "서술형 답안으로, 과제의 적절성 평가와 수정 제안의 논리적 근거를 포함해야 함.",
    },
    11: {
        "question": "주어진 교육 목표를 기반으로 학습목표를 정교화하시오. 교육 목표는 '학생들이 기본적인 프로그래밍 개념을 이해하고 간단한 프로그램을 작성할 수 있도록 한다'입니다.",
        "answer": "학습목표는 학생들이 변수와 자료형을 설명할 수 있고, 조건문과 반복문을 사용하여 간단한 프로그램을 작성할 수 있는 것이다.",
    },
    12: {
        "question": "주어진 학습 목표에 따라 적절한 평가 방법을 설계하시오. 목표: '학생들이 ADDIE 모델의 각 단계를 설명할 수 있다.'",
        "answer": "서술형 답안으로 각 단계에 대한 설명을 요구하는 평가 계획을 포함해야 한다.",
    },
    13: {
        "question": "주어진 학습 목표와 학습자 분석 정보를 바탕으로 적절한 교수 내용을 선정하시오.",
        "answer": "서술형 답안의 핵심 요소에는 학습 목표와의 일치성, 학습자 특성 반영, 교육 내용의 적절성 등이 포함되어야 한다.",
    },
    14: {
        "question": "주어진 학습 목표는 '학생들이 기본적인 프로그래밍 개념을 이해하도록 돕는 것'이다. 이 목표를 달성하기 위한 효과적인 교수 전략을 설계하시오.",
        "answer": "학습 목표에 적합한 교수 전략과 학습 경험을 구체적으로 서술한다.",
    },
    15: {
        "question": "주어진 학습 목표와 학습자 특성에 기반하여, 학습자의 동기를 높이고 자기 주도 학습을 촉진할 수 있는 비교수적 전략을 설계하시오.",
        "answer": "학습자 참여를 유도하는 활동 제안, 자기 주도 학습을 촉진하는 방법 제시 등",
    },
    16: {
        "question": "특정 학습 목표와 학습자 특성을 고려하여, 해당 목표를 효과적으로 달성할 수 있는 교수전략과 학습경험을 설계하고, 이를 지원할 매체 선정 및 활용 계획을 제시하시오.",
        "answer": "서술형 답안에는 학습 목표와 학습자 특성에 맞는 교수전략, 학습경험, 매체 선정 및 활용 계획이 포함되어야 한다.",
    },
    17: {
        "question": "주어진 학습 목표는 '학생들이 기본적인 프로그래밍 개념을 이해하고 간단한 프로그램을 작성할 수 있도록 하는 것'이다. 학습자 특성은 초등학교 5학년 수준이며, 수업 시간은 45분씩 주 2회이다. 이 목표를 달성하기 위한 학습활동을 설계하고, 이를 시간 구조에 맞게 배치하라.",
        "answer": "서술형 답안으로, 학습활동의 종류와 각 활동에 할당된 시간 및 순서를 포함해야 한다.",
    },
    18: {
        "question": "주어진 교육 목표와 학습자 분석 정보를 바탕으로, 효과적인 학습 경험을 제공하기 위한 스토리보드 및 화면 흐름을 설계하시오.",
        "answer": "교육 목표에 부합하는 학습 활동과 화면 전환 흐름을 포함한 상세한 설계 서술",
    },
    19: {
        "question": "주어진 학습 목표는 '기초 통계 개념 이해하기'이며, 학습자 프로필은 '대학생, 통계학 초보자'이다. 이 목표와 프로필을 바탕으로 학습자용 자료의 형태와 내용을 제안하라.",
        "answer": "서술형 답안으로, 제안된 자료의 형태(예: 동영상, 텍스트북 등)와 내용의 핵심 요소(예: 평균, 중앙값 등)를 포함해야 한다.",
    },
    20: {
        "question": "교육 목표가 '학생들이 기본적인 프로그래밍 개념을 이해하고 간단한 프로그램을 작성할 수 있도록 한다'일 때, 이에 적합한 교수자용 매뉴얼의 목차와 각 장의 주요 내용을 설계하라.",
        "answer": "매뉴얼의 목차에는 '1. 교육 목표 및 개요', '2. 기본 프로그래밍 개념 설명', '3. 실습 예제 및 해결 방법', '4. 평가 방법 및 피드백' 등이 포함되어야 한다. 각 장의 주요 내용에는 교육 목표에 맞는 설명과 예제, 평가 기준 등이 포함되어야 한다.",
    },
    21: {
        "question": "LLM 기반 교수설계 지원 Agent가 운영자용 매뉴얼 초안을 분석하여 일관성을 평가하고 수정 제안을 작성하시오.",
        "answer": "일관성 평가 결과와 구체적인 수정 제안 서술",
    },
    22: {
        "question": "주어진 교육 목표에 따라 평가 문항을 작성하시오. 교육 목표는 '학생들이 ADDIE 모델의 개발 단계에서 프로토타입의 중요성을 이해한다'입니다.",
        "answer": "평가 문항은 서술형으로, 'ADDIE 모델의 개발 단계에서 프로토타입이 왜 중요한지 설명하시오.'와 같은 형식이 적절하다.",
    },
    23: {
        "question": "다음은 개발된 교육 자료의 일부입니다. 이 자료를 검토하고, 개선이 필요한 세 가지 요소를 서술하시오.",
        "answer": "서술형 답안에는 개선이 필요한 요소와 그 이유, 그리고 구체적인 개선 방안이 포함되어야 한다.",
    },
    24: {
        "question": "교수자와 운영자를 위한 오리엔테이션 자료를 준비하는 과정에서 고려해야 할 주요 요소는 무엇인가?",
        "answer": "서술형 답안의 핵심 요소로는 오리엔테이션의 목표, 대상자의 요구 분석, 프로그램 운영 절차, 필요한 리소스 등이 포함되어야 한다.",
    },
    25: {
        "question": "프로그램 실행 전에 시스템과 환경을 점검하여 잠재적인 문제를 식별하고, 이를 해결하기 위한 조치를 제안하시오.",
        "answer": "시스템 호환성, 네트워크 연결 상태, 필요한 소프트웨어 설치 여부 등을 점검하고, 문제 발생 시 해결 방안을 제시해야 한다.",
    },
    26: {
        "question": "LLM 기반 교수설계 지원 Agent가 프로토타입 실행 단계에서 사용자 피드백을 수집하고 분석하는 방법을 설명하시오.",
        "answer": "피드백 수집 방법, 분석 기법, 개선점 제안 방식 등",
    },
    27: {
        "question": "학습 프로그램이 실행 중에 예상치 못한 오류가 발생했다. 오류의 원인을 분석하고, 이를 해결하기 위한 방안을 제시하라.",
        "answer": "오류 원인 분석 및 해결 방안 서술",
    },
    28: {
        "question": "파일럿 실행 중 수집된 학습자 피드백 데이터를 분석하여, 어떤 부분이 학습자에게 가장 큰 어려움을 주었는지 서술하시오.",
        "answer": "서술형 답안에는 학습자가 어려움을 겪은 특정 학습 모듈이나 활동, 그 이유, 그리고 이를 개선하기 위한 구체적인 제안이 포함되어야 한다.",
    },
    29: {
        "question": "형성평가 결과를 분석하여 학습자의 이해도가 낮은 영역을 식별하고, 해당 영역을 개선하기 위한 구체적인 방안을 제안하시오.",
        "answer": "서술형 답안으로, 식별된 문제 영역과 그에 대한 개선 방안을 포함해야 한다.",
    },
    30: {
        "question": "주어진 학습 목표에 따라 총괄 평가 문항을 설계하시오. 학습 목표: '학생들은 ADDIE 모델의 각 단계를 설명할 수 있다.'",
        "answer": "서술형 답안으로 각 단계의 설명을 포함해야 하며, 단계의 순서와 주요 특징을 명확히 기술해야 한다.",
    },
    31: {
        "question": "새로운 교육 프로그램의 효과성을 평가하기 위해 총괄평가 데이터를 분석하시오. 분석 결과를 바탕으로 프로그램의 채택 여부를 결정하는 보고서를 작성하시오.",
        "answer": "보고서에는 프로그램의 목표 달성 여부, 학습자 성취도, 교육 방법의 효과성, 개선 사항 등이 포함되어야 한다.",
    },
    32: {
        "question": "프로그램의 총괄평가 데이터를 바탕으로 프로그램의 채택 여부를 결정하라. 프로그램의 목표 달성도, 학습자 만족도, 비용 효율성을 고려하여 분석하라.",
        "answer": "서술형 답안에는 프로그램의 목표 달성도, 학습자 만족도, 비용 효율성에 대한 분석과 그에 따른 프로그램 채택 여부 결정이 포함되어야 한다.",
    },
    33: {
        "question": "최근 학습 프로그램에 대한 학습자 피드백과 성과 데이터를 분석하여 개선점을 도출하고, 구체적인 개선 방안을 제시하라.",
        "answer": "학습자 피드백 분석 결과, 학습 자료의 난이도가 높다는 의견이 많았으며, 성과 데이터에서는 특정 모듈에서 점수가 낮게 나타났다. 개선 방안으로는 해당 모듈의 난이도를 조정하고, 추가 학습 자료를 제공하는 것을 제안한다.",
    },
}


def get_benchmark_example(sub_item_id: int) -> dict:
    """33개 소단계 중 특정 항목의 Benchmark Example 반환"""
    return BENCHMARK_EXAMPLES.get(sub_item_id, {})


# ============================================================================
# 유틸리티 함수
# ============================================================================
def get_item_ids_for_phase(phase: ADDIEPhase) -> list:
    """단계별 평가 항목 ID 목록 반환 (CSV 중단계 기준)"""
    phase_items = {
        ADDIEPhase.ANALYSIS: ["A1", "A2", "A3"],       # 3개 중단계
        ADDIEPhase.DESIGN: ["D1", "D2", "D3"],         # 3개 중단계
        ADDIEPhase.DEVELOPMENT: ["Dev1", "Dev2"],      # 2개 중단계 (Dev3 제거)
        ADDIEPhase.IMPLEMENTATION: ["I1", "I2"],       # 2개 중단계
        ADDIEPhase.EVALUATION: ["E1", "E2", "E3"],     # 3개 중단계 (E3 추가)
    }
    return phase_items.get(phase, [])


def get_rubric_definition(phase: str, item_id: str) -> dict:
    """특정 평가 항목의 정의 반환"""
    return ADDIE_RUBRIC_DEFINITIONS.get(phase, {}).get(item_id, {})


def get_detailed_rubric(sub_item_id: int) -> dict:
    """33개 소단계 중 특정 항목의 상세 루브릭 반환"""
    return DETAILED_RUBRIC_DEFINITIONS.get(sub_item_id, {})


def get_sub_items_for_item(item_id: str) -> list:
    """13개 항목에 매핑된 33개 소단계 ID 목록 반환"""
    return ITEM_MAPPING.get(item_id, [])


def get_phase_sub_items(phase: str) -> list:
    """특정 ADDIE 단계의 모든 33개 소단계 ID 반환"""
    phase_mapping = {
        "analysis": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
        "design": [11, 12, 13, 14, 15, 16, 17, 18],
        "development": [19, 20, 21, 22, 23],
        "implementation": [24, 25, 26, 27],
        "evaluation": [28, 29, 30, 31, 32, 33],
    }
    return phase_mapping.get(phase, [])
